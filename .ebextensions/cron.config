files:
    "/tmp/every_ten.template":
        mode: "000644"
        owner: root
        group: root
        content: |
            */10 * * * * root /usr/local/bin/every_ten.sh

    "/usr/local/bin/every_ten.sh":
        mode: "000755"
        owner: root
        group: root
        content: |
            #!/bin/bash
            docker exec $(docker ps -a -q | head -n 1) /bin/eb/every_ten.sh 1 &> /tmp/every_ten.log
            exit 0

    "/tmp/every_day.template":
        mode: "000644"
        owner: root
        group: root
        content: |
            10 11 * * * root /usr/local/bin/every_day.sh

    "/usr/local/bin/every_day.sh":
        mode: "000755"
        owner: root
        group: root
        content: |
            #!/bin/bash
            docker exec $(docker ps -a -q | head -n 1) /bin/eb/every_day.sh 1 &> /tmp/every_day.log
            exit 0



commands:
    remove_old_cron:
        command: "rm -f /etc/cron.d/*.bak"

    remove_old_cron_template:
        command: "rm -f /tmp/*.bak"

    enable_cron_ten:
        command: "mv /tmp/every_ten.template /etc/cron.d/every_ten"
        leader_only: true

    enable_cron_daily:
        command: "mv /tmp/every_day.template /etc/cron.d/every_day"
        leader_only: true        